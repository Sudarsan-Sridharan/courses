version: 1.0.{build}
platform:
  - x86
  - x64
build:
#  verbosity: detailed
  verbosity: quiet

install:
  - cup all -v
  - cinst -y jdk8 nodejs.install
  - npm install npm@latest -g
  - npm cache clean
  - refreshenv
  - java -version
  - node -v
  - npm -v

build_script:
  - dir
  - cd backend
  - dir
  - gradlew.bat build

test_script:
  - cd ../frontend; npm run build

#  - dir
#  - cd ..
#  - dir
#  - cd frontend
#  - dir
#  - npm run build

branches:
  only:
    - master

#cache:
#    - node_modules -> frontend\package.json

environment:
  JAVA_HOME: C:\Program Files\Java\jdk1.8.0
